import{_ as i}from"./app.CBEB_U2i.js";import{c as a,o as n,ad as e}from"./chunks/vendor.G7bju0he.js";const l="/assets/page-special-file.B7qEWHq3.jpg",t="/assets/layout-special-file.CrwtZYXM.jpg",p="/assets/nested-layout.imJYPK14.jpg",h="/assets/nested-layouts-ui.DmD1r2Sa.jpg",r="data:image/jpeg;base64,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",y=JSON.parse('{"title":"页面及布局","description":"","frontmatter":{},"headers":[],"relativePath":"react/Official-Docs/Next/Routing/pages-and-layouts.md","filePath":"react/Official-Docs/Next/Routing/pages-and-layouts.md","lastUpdated":1738226181000}'),k={name:"react/Official-Docs/Next/Routing/pages-and-layouts.md"};function d(c,s,o,g,A,E){return n(),a("div",null,s[0]||(s[0]=[e('<h1 id="页面及布局" tabindex="-1">页面及布局 <a class="header-anchor" href="#页面及布局" aria-label="Permalink to “页面及布局”">​</a></h1><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>我们建议您先阅读<a href="./basis.html">基础路由概念</a>及<a href="./defining-routes.html">定义</a>后再进行以下阅读,方便您更好的理解.</p></div><p>这篇文章教的是如何运用<code>layout.js</code>,<code>page.js</code>,<code>template.js</code>这三个特殊的文件,为路由构建出对应的用户界面.</p><h2 id="页面" tabindex="-1">页面 <a class="header-anchor" href="#页面" aria-label="Permalink to “页面”">​</a></h2><p>一个页面,就是专属于一个路由的用户界面.页面的定义,实际就是在<code>page.js</code>文件中导出一个React组件.<br> 最为基础的就是,为整个应用添加一个刚打开的时的页面,方法就是在<code>app</code>目录下创建<code>page.js</code>文件. <img src="'+l+`" alt="index-for-app"></p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 点进去第一时间看到的内容: localhost:5173/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Hello, Home page&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>而要创建更多的界面,其实就是创建新文件夹,并在其中创建<code>page.js</code>就行了.<br> 比如要为<code>/dashboard</code>添加展示内容,那就在<code>app</code>目录下创建<code>dashboard</code>文件夹,在<code>dashboard</code>内创建<code>page.js</code>文件就行了.(之后简化这个过程为<code>app/dashboard/page.js</code>,希望你能够理解)</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Hello, Dashboard Page!&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><ul><li>路由展示内容的文件后缀,可以是:<code>.js</code>,<code>.ts</code>,<code>.tsx</code></li><li>一个页面,通常是路由子树中的叶子节点</li><li>要使一个URL由内容展示,通常需要一个<code>page.js</code>文件,并在其中导出React组件</li><li>默认情况下,页面都是服务器组件((Server Components](<a href="https://nextjs.org/docs/app/building-your-application/rendering/server-components" target="_blank" rel="noreferrer">https://nextjs.org/docs/app/building-your-application/rendering/server-components</a>)),你也可以通过手动的方式将其设置为<a href="https://nextjs.org/docs/app/building-your-application/rendering/client-components" target="_blank" rel="noreferrer">客户端组件</a></li><li>页面内部可以获取数据.更多相关的内容可以直接<a href="https://nextjs.org/docs/app/building-your-application/data-fetching" target="_blank" rel="noreferrer">跳到这里了解</a></li></ul></div><h2 id="布局" tabindex="-1">布局 <a class="header-anchor" href="#布局" aria-label="Permalink to “布局”">​</a></h2><p>布局是当前树下,组件展示的整体架构.多个子路由共享相同的页面布局.<br> 页面之间切换的时候(导航),布局组件会保持状态的不变,原有的交互也不会变,更不会重新进行渲染.<br> 布局也是可以嵌套的.</p><p>默认的布局定义,就是在文件夹中创建<code>layout.js</code>文件,并导出React组件.这个组件要求接受一个<code>children</code>属性(prop),用于子布局或页面内容的填充.(变children不变layout)<br> 举例说,定义一个共享于<code>/dashboard</code>和<code>/dashboard/settings</code>页面的布局,可以这样写: <img src="`+t+`" alt="structure-of-layouts"></p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app/dashboard/layout.tsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DashboardLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//可以是页面,也可以是子布局</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">section</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 需要共同展示的内容,标题/侧边栏等等 */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">nav</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">nav</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {children}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">section</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="根布局-必需" tabindex="-1">根布局(必需) <a class="header-anchor" href="#根布局-必需" aria-label="Permalink to “根布局(必需)”">​</a></h2><p>根布局,应用于所有的路由界面.它就是在<code>app</code>目录下的一个普通文件而已(<code>app/layout.tsx</code>).但它是<strong>必须要有的.</strong> 它必须包含<code>html</code>和<code>body</code>标签,从而允许你修改由服务器返回的初始HTML内容.(感觉很有深意,但不太懂)</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RootLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    children</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">React</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReactNode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* Layout UI */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{children}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="嵌套布局" tabindex="-1">嵌套布局 <a class="header-anchor" href="#嵌套布局" aria-label="Permalink to “嵌套布局”">​</a></h2><p>默认情况下,布局会随文件夹的嵌套,实现分层的布局.也就是说,有父布局和子布局的概念.子布局的功能通过父布局的<code>children</code>属性实现.<br> 简单说就是,在分块文件夹下创建<code>layout.js</code>文件,这个就是子布局了.<br> (根布局必然是<code>app/layout.js</code>,子布局自然就可以是<code>app/dashboard/layout.js</code>了)<br> 下面这个例子就是,为<code>/dashboard</code>这个路由,创建嵌套路由,<code>/dashboard/layout.js</code>. <img src="`+p+`" alt="nested-layout"></p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DashboardLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    children</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    children</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">React</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReactNode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">section</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{children}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">section</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>如果你要结合上面定义的两个布局,根布局<code>app/layout.js</code>包裹Dashboard的布局(<code>app/dashboard/layout.js</code>),然后又包裹着<code>app/dashboard/*</code>下的所有分块,就可以用以下文件结构实现: <img src="`+h+'" alt="nested-layout-ui"></p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><ul><li><code>.js</code>,<code>.ts</code>,<code>.tsx</code>文件均可作为布局文件对待.</li><li>只有根布局允许包含<code>&lt;html&gt;</code>和<code>&lt;body&gt;</code>标签</li><li>当同一文件夹下,既有<code>layout.js</code>也有<code>page.js</code>文件,布局文件将包裹页面内容.</li><li>布局文件默认是服务器组件,不过你可以手动设置为客户端组件</li><li>布局文件内可以获取数据.更多相关的内容可以直接<a href="https://nextjs.org/docs/app/building-your-application/data-fetching" target="_blank" rel="noreferrer">跳到这里了解</a></li><li>通过父布局实现和子组件进行数据传递是不可行的.不过你可以在一个路由之中多次请求相同的数据,React会自动减少去除相同的请求,而不影响页面性能.</li><li>布局文件访问不了它底下的文件分块.如果真的要访问所有的路由分块,你可以在客户端组件中通过<code>useSelectedLayoutSegment</code>或者<code>useSelectedLayoutSegments</code>实现.(???)</li><li>你可以路由分组的方式,选择使用或不使用特定的布局.</li><li>你也可以用路由分组,创建多个根布局.(看看这个例子.)[<a href="https://nextjs.org/docs/app/building-your-application/routing/route-groups#creating-multiple-root-layouts" target="_blank" rel="noreferrer">https://nextjs.org/docs/app/building-your-application/routing/route-groups#creating-multiple-root-layouts</a>]</li><li>从<code>pages</code>目录迁移过来:在新版本中,根布局代替了<code>_app.js</code>和<code>_document.js</code>文件.<a href="https://nextjs.org/docs/app/building-your-application/upgrading/app-router-migration#migrating-_documentjs-and-_appjs" target="_blank" rel="noreferrer">更多关于迁移的内容</a></li></ul></div><h2 id="模板" tabindex="-1">模板 <a class="header-anchor" href="#模板" aria-label="Permalink to “模板”">​</a></h2><p>模板和布局有点相似,它们都会包裹子布局或页面.它们又有点不像,布局内容不会改变,状态也会维持,但模板则会在每次导航时都为其子内容创建新的实例.换句话说,当用户在不同的路由切换,而这些切换的路由之间使用的是同一个模板,新的组件实例就会被挂载,DOM元素就会被重新创建,状态也不会持久,副作用也会重新进行同步.<br> 有时候你就是需要这些特定的页面行为,也就是模板比布局更加合适的情况.<br> 举例:</p><ul><li>依赖于<code>useEffect</code>(比如记录页面视图)和<code>useState</code>(比如每个页面的反馈表格)的特定功能.</li><li>改变默认的框架行为.比如布局里的Suspense Boundaries只在布局初次加载时会展示它的后备展示页面,而不在页面切换时展示.而使用了模板,每次导航都会展示这个Suspense Boundaries对应的候补页面.</li></ul><p>模板的定义,就是在目录下创建<code>template.js</code>文件,并导出React组件.这个组件需要接受<code>children</code>属性. <img src="'+r+`" alt="template-def"></p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app/template.tsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    children</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    children</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> React</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReactNode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{children}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>而模板的嵌套,则是在<code>Layout</code>和<code>children</code>属性中渲染.以下是个简要的演示.</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{routeParam}&gt;{children}&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol><li>好像要在布局文件中使用模板</li><li>需要为模板组件添加一个unique key.(处于性能考虑?)</li></ol><h2 id="元数据" tabindex="-1">元数据 <a class="header-anchor" href="#元数据" aria-label="Permalink to “元数据”">​</a></h2><p>在<code>app</code>目录中,你可以使用<a href="https://nextjs.org/docs/app/building-your-application/optimizing/metadata" target="_blank" rel="noreferrer">Next为您提供的API</a>修改<code>&lt;head&gt;</code>HTML元素,像<code>title</code>,<code>meta</code>这些.<br> 元数据的定义,还可以通过在<code>layout.js</code>或<code>page.js</code>文件中,导出一个元数据对象(<code>metadata object</code>),或是<code>generateMetada</code>函数.</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app/page.tsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MetaData } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;next&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> metadata</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MetaData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Next.js&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;...&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>我们不建议您通过手动在根布局中,添加<code>&lt;head&gt;</code>标签,从而修改<code>title</code>,<code>meta</code>这些内容.<br> 我们为您提供的专门处理应用元数据的API,会自动处理一些高级需求,像streaming,<code>&lt;head&gt;</code>元素去重等等.</p></div><p><a href="https://nextjs.org/docs/app/api-reference/functions/generate-metadata" target="_blank" rel="noreferrer">如果需要了解更多关于元数据的内容,可以看这.</a></p>`,34)]))}const m=i(k,[["render",d]]);export{y as __pageData,m as default};
